(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{407:function(t,a,s){"use strict";s.r(a);var c=s(42),r=Object(c.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"点击事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#点击事件"}},[t._v("#")]),t._v(" 点击事件")]),t._v(" "),s("h2",{attrs:{id:"点击穿透"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#点击穿透"}},[t._v("#")]),t._v(" 点击穿透")]),t._v(" "),s("p",[t._v("click 事件什么时候触发？")]),t._v(" "),s("p",[t._v("浏览器在 touchend 之后会等待约 300ms ，如果没有 tap 行为，则触发 click 事件")]),t._v(" "),s("p",[t._v("假如页面上有两个元素 A 和 B。B 元素在 A 元素之上。我们在 B 元素的 touchstart 事件上注册了一个回调函数，该回调函数的作用是隐藏 B 元素。我们发现，当我们点击 B 元素，B 元素被隐藏了，随后，A 元素触发了 click 事件。\n这是因为在移动端浏览器，事件执行的顺序是 touchstart > touchend > click。而 click 事件有 300ms 的延迟，当 touchstart 事件把 B 元素隐藏之后，隔了 300ms，浏览器触发了 click 事件，但是此时 B 元素不见了，所以该事件被派发到了 A 元素身上。如果 A 元素是一个链接，那此时页面就会意外地跳转。")]),t._v(" "),s("p",[t._v("eg:")]),t._v(" "),s("ol",[s("li",[t._v("点击穿透问题：点击蒙层（mask）上的关闭按钮，蒙层消失后发现触发了按钮下面元素的 click 事件")]),t._v(" "),s("li",[t._v("跨页面点击穿透问题：如果按钮下面恰好是一个有 href 属性的 a 标签，那么页面就会发生跳转")])]),t._v(" "),s("h3",{attrs:{id:"如何解决"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何解决"}},[t._v("#")]),t._v(" 如何解决")]),t._v(" "),s("ul",[s("li",[t._v("延迟 350ms 之后在隐藏元素")]),t._v(" "),s("li",[t._v("只是使用 touch 事件")]),t._v(" "),s("li",[t._v("使用 fastclick 的库")])]),t._v(" "),s("h2",{attrs:{id:"tips"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tips"}},[t._v("#")]),t._v(" tips")]),t._v(" "),s("p",[t._v("用 tab 键移动到某个链接然后按下回车键的动作也会触发 onclick 事件")]),t._v(" "),s("h2",{attrs:{id:"click-在-ios-上有-300ms-延迟，原因及如何解决？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#click-在-ios-上有-300ms-延迟，原因及如何解决？"}},[t._v("#")]),t._v(" click 在 ios 上有 300ms 延迟，原因及如何解决？")]),t._v(" "),s("h3",{attrs:{id:"禁用缩放"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#禁用缩放"}},[t._v("#")]),t._v(" 禁用缩放")]),t._v(" "),s("meta",{attrs:{name:"viewport",content:"width=device-width, user-scalable=no"}}),t._v(" "),s("h3",{attrs:{id:"利用-fastclick，其原理是："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#利用-fastclick，其原理是："}},[t._v("#")]),t._v(" 利用 FastClick，其原理是：")]),t._v(" "),s("p",[t._v("检测到 touchend 事件后，立刻出发模拟 click 事件，并且把浏览器 300 毫秒之后真正出发的事件给阻断掉")]),t._v(" "),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://juejin.im/post/5b3cc9836fb9a04f9a5cb0e0",target:"_blank",rel:"noopener noreferrer"}},[t._v("移动端 300ms 点击延迟和点击穿透"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);