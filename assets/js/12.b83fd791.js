(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{356:function(t,e,a){t.exports=a.p+"assets/img/lifecycle.6f2c97f0.png"},506:function(t,e,a){"use strict";a.r(e);var s=a(42),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生命周期"}},[t._v("#")]),t._v(" 生命周期")]),t._v(" "),s("blockquote",[s("p",[t._v("源码文件夹 src/core/instance")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建之前和创建")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://github.com/vuejs/vue/blob/0d2e9c46f16e9ec5bd0f3eebd2aa31c7f7493856/src/core/instance/init.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initLifecycle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initEvents")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initRender")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callHook")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"beforeCreate"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initInjections")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// resolve injections before data/props")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initProvide")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// resolve provide after data/props")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callHook")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"created"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:a(356),alt:"生命周期"}})]),t._v(" "),s("blockquote",[s("p",[t._v("activited 和 deadctivated，keep-alive 专属，组件被激活时调用，组件被销毁时调用")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("生命周期钩子")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("组件状态")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("beforeCreate")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("初始化事件，不能访问到 data、computed、watch、methods 上的方法和数据")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("created")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("将数据变成响应式，可访问 data、computed、watch、methods 上的方法和数据，未挂载到 DOM，不能访问到$el属性，$ref 属性内容为空数组")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("beforeMount")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("在挂载开始之前被调用，beforeMount 之前，会找到对应的 template，并编译成 render 函数")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("mounted")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("实例挂载到 DOM 上，此时可以通过 DOM API 获取到 DOM 节点，$ref 属性可以访问")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("beforeupdate")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("响应式数据更新时调用，发生在虚拟 DOM 打补丁之前")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("updated")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("虚拟 DOM 重新渲染和打补丁之后调用，组件 DOM 已经更新，可执行依赖于 DOM 的操作")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("beforeDestroy")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("实例销毁之前调用。这一步，实例仍然完全可用，this 仍能获取到实例")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("destroyed")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("实例销毁后调用，调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁")])])])]),t._v(" "),s("h2",{attrs:{id:"qa"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#qa"}},[t._v("#")]),t._v(" QA")]),t._v(" "),s("p",[t._v("通过这些问题，可以对生命周期理解的更加深刻")]),t._v(" "),s("h3",{attrs:{id:"为什么在-created-请求数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么在-created-请求数据"}},[t._v("#")]),t._v(" 为什么在 created 请求数据")]),t._v(" "),s("p",[t._v("因为本着获取数据越早越好的原则，如果不需要对 DOM 进行操作，在 created 周期内获取数据，因为此时实例已经完成了数据观测，属性和方法的运算")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://vuejs.org/v2/api/#created",target:"_blank",rel:"noopener noreferrer"}},[t._v("created"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("在实例创建完成后被立即调用。在这一步，实例已完成以下的配置：数据观测 (data observer)，属性和方法的运算，watch/event 事件回调。然而，挂载阶段还没开始，$el 属性目前不可见")])]),t._v(" "),s("h2",{attrs:{id:"vue-父子组件生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-父子组件生命周期"}},[t._v("#")]),t._v(" vue 父子组件生命周期")]),t._v(" "),s("p",[s("code",[t._v("父 beforeCreate->父 created->父 beforeMount->子 beforeCreate->子 created->子 beforeMount->子 mounted->父 mounted")])]),t._v(" "),s("p",[t._v("这样很好理解，毕竟父组件可能会 props 传递数据给子组件的，因此选择 beforeMount 停止很恰当")])])}),[],!1,null,null,null);e.default=n.exports}}]);