(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{553:function(t,a,s){"use strict";s.r(a);var e=s(42),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"uri"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uri"}},[t._v("#")]),t._v(" URI")]),t._v(" "),s("h2",{attrs:{id:"uri-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uri-2"}},[t._v("#")]),t._v(" URI")]),t._v(" "),s("p",[t._v("统一资源定位符 标准格式")]),t._v(" "),s("p",[t._v("协议类型:"),s("code",[t._v("[//服务器地址[:端口号]][/资源层级unix文件路径]文件名[?查询][#片段id]")])]),t._v(" "),s("h3",{attrs:{id:"url-interface"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url-interface"}},[t._v("#")]),t._v(" URL interface")]),t._v(" "),s("p",[t._v("URL is used to parse, construct, normalise, and encode URLs")]),t._v(" "),s("p",[t._v("所以这边值得注意的是，传入 URL 构造函数的字符串必须带协议（"),s("code",[t._v("http://www.123.com")]),t._v("，注意如果是"),s("code",[t._v("www.123.com")]),t._v("这样的网址，需要给他处理一下，再传入这个构造函数）")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Parameters:")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// url")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// A USVString representing an absolute or relative URL. If url is a relative URL, base is required, and will be used as the base URL. If url is an absolute URL, a given base will be ignored.")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// base Optional")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// A USVString representing the base URL to use in case url is a relative URL. If not specified, it defaults to ''.")]),t._v("\nurl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("base"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"url-createobjecturl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url-createobjecturl"}},[t._v("#")]),t._v(" URL.createObjectURL()")]),t._v(" "),s("p",[t._v("URL.createObjectURL() 静态方法会创建一个 DOMString，其中包含一个表示参数中给出的对象的 URL\n这个 URL 的生命周期和创建它的窗口中的 document 绑定。这个新的 URL 对象表示指定的 File 对象或 Blob 对象")]),t._v(" "),s("p",[t._v("这个 API 已经不推荐使用，使用"),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/srcObject",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTMLMediaElement.srcObject\n"),s("OutboundLink")],1),t._v("代替")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// object")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// A File, Blob, MediaStream, or MediaSource object to create an object URL for.")]),t._v("\nobjectURL "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createObjectURL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"上传图片预览"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传图片预览"}},[t._v("#")]),t._v(" 上传图片预览")]),t._v(" "),s("p",[t._v("有时我们通过 input 上传图片文件之前，会希望可以预览一下图片，这个时候就可以通过前面所学到的东西实现，而且非常简单。"),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/File/Using_files_from_web_applications#Example_Using_object_URLs_to_display_images",target:"_blank",rel:"noopener noreferrer"}},[t._v("demo"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("upload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preview"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("alt")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("预览"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" upload "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#upload"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" preview "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#preview"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nupload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onchange")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" file "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" upload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("files"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//File对象")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" src "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createObjectURL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  preview"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" src"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("video 标签，audio 标签还是 img 标签的 src 属性，不管是相对路径，绝对路径，或者一个网络地址，归根结底都是指向一个文件资源的地址。那我们生成一个指向我们上传的文件的地址然后添加到 src 属性上，不就能实现预览了嘛。")]),t._v(" "),s("p",[t._v("通过"),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/URL/createObjectURL",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("URL.createObjectURL()")]),s("OutboundLink")],1),t._v("创建一个新的 URL 对象，表示指定的  File  对象或  Blob  对象。")]),t._v(" "),s("h3",{attrs:{id:"url-revokeobjecturl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url-revokeobjecturl"}},[t._v("#")]),t._v(" URL.revokeObjectURL()")]),t._v(" "),s("p",[t._v("Revokes an object URL previously created using URL.createObjectURL().")]),t._v(" "),s("h3",{attrs:{id:"获取-url-的查询参数的值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取-url-的查询参数的值"}},[t._v("#")]),t._v(" 获取 URL 的查询参数的值")]),t._v(" "),s("p",[t._v("eg: "),s("code",[t._v("const url =http://www.123.com?id=123&name=kuchcy'")])]),t._v(" "),s("p",[t._v("我应该如何获取到 URL 里面的 id 的值呢？\n一行代码的事情(但是此方法慎用，兼容性不太好) :\n"),s("code",[t._v("new URL(url).searchParams.get('id')")])]),t._v(" "),s("h3",{attrs:{id:"相对路径转绝对路径"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相对路径转绝对路径"}},[t._v("#")]),t._v(" 相对路径转绝对路径")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\na"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// url 为相对路径")]),t._v("\na"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 相对路径已经变成绝对路径")]),t._v("\n")])])]),s("h3",{attrs:{id:"uri-vs-url"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uri-vs-url"}},[t._v("#")]),t._v(" URI vs URL")]),t._v(" "),s("p",[t._v("了解了一下 URI 和 URL 的区别。\nURI 的英文 Uniform Resource Identify , URL 的英文 Uniform Resource Location。其实还有 URN ( Uniform Resouce Name ) 。指定一个资源我们可以通过他的名字，他的地址。所以 URL,URN are all types of URI.")]),t._v(" "),s("h2",{attrs:{id:"navigator-sendbeacon"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#navigator-sendbeacon"}},[t._v("#")]),t._v(" Navigator.sendBeacon()")]),t._v(" "),s("blockquote",[s("p",[t._v("可以用于记录用户信息，防止突然关闭浏览器记录不到的情况")])]),t._v(" "),s("p",[s("code",[t._v("navigator.sendBeacon(url, data);")])]),t._v(" "),s("p",[t._v("The navigator.sendBeacon() method can be used to asynchronously transfer a small amount of data over HTTP to a web server.")]),t._v(" "),s("h2",{attrs:{id:"双斜杠-开头的-url-的含义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#双斜杠-开头的-url-的含义"}},[t._v("#")]),t._v(" 双斜杠//开头的 URL 的含义")]),t._v(" "),s("p",[t._v("“protocol-less” URL is the best way to reference third party content that’s available via both HTTP and HTTPS.")]),t._v(" "),s("p",[t._v("缺点")]),t._v(" "),s("ol",[s("li",[t._v('Protocol-less URLs may not work as expected when you "open" a local file in your browser, because the page\'s base protocol will be file:///')])]),t._v(" "),s("p",[t._v("Now that SSL is encouraged for everyone and doesn’t have performance concerns, this technique is now an anti-pattern. If the asset you need is available on SSL, then always use the https:// asset.")]),t._v(" "),s("h2",{attrs:{id:"decodeuri-vs-decodeuricomponent"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#decodeuri-vs-decodeuricomponent"}},[t._v("#")]),t._v(" decodeURI vs decodeURIComponent")]),t._v(" "),s("p",[t._v("encodeURI 将输出符号的 utf-8 形式，并且在每个字节前加上%，需要注意的是，encodeURI 不对单引号编码")]),t._v(" "),s("p",[t._v("URL 只能使用英文字母，阿拉伯数字和某一些符号。")]),t._v(" "),s("p",[t._v("从名字上看，decodeURI 就是转义整个 Uri ,")]),t._v(" "),s("p",[t._v("decodeURIComponent 就是转义 (; / ? : @ & = + $ , #), decodeURIComponent 将它转化为普通的文本字符，而不是当做特殊符号")]),t._v(" "),s("p",[t._v("url 合法字符有两种(在 uri 里面的地址栏不会被转义)")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://stackoverflow.com/questions/747641/what-is-the-difference-between-decodeuricomponent-and-decodeuri",target:"_blank",rel:"noopener noreferrer"}},[t._v("What is the difference between decodeURIComponent and decodeURI?"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("enCodeUri (将无效的 uri 转为合法的 uri)")]),t._v(" "),s("p",[t._v("URL-encodes the input, but assumes a full URL is given, so returns a valid URL by not encoding the protocol (e.g. http://) and host name (e.g. www.stackoverflow.com).")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.example.com/string with + and ? and & and spaces"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURI")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// http://www.example.com/string%20with%20+%20and%20?%20and%20&%20and%20spaces")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURIComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// http%3A%2F%2Fwww.example.com%2Fstring%20with%20%2B%20and%20%3F%20and%20%26%20and%20spaces")]),t._v("\n")])])]),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://juejin.im/post/5d1ea7a8e51d454fd8057bea",target:"_blank",rel:"noopener noreferrer"}},[t._v("为什么视频网站的视频链接地址是 blob？"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://stackoverflow.com/questions/4831741/can-i-change-all-my-http-links-to-just",target:"_blank",rel:"noopener noreferrer"}},[t._v("Can I change all my http:// links to just //?"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);