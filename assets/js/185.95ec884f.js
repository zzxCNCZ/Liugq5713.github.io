(window.webpackJsonp=window.webpackJsonp||[]).push([[185],{540:function(t,a,s){"use strict";s.r(a);var n=s(42),r=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"node-包管理器-npm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node-包管理器-npm"}},[t._v("#")]),t._v(" Node 包管理器 Npm")]),t._v(" "),s("h2",{attrs:{id:"npm-钩子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-钩子"}},[t._v("#")]),t._v(" npm 钩子")]),t._v(" "),s("ul",[s("li",[t._v("npm 脚本有"),s("code",[t._v("pre")]),t._v("和"),s("code",[t._v("post")]),t._v("两个钩子。执行"),s("code",[t._v("npm run build")]),t._v("的时候，会自动按照下面的顺序执行。")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("npm run prebuild "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" npm run build "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" npm run postbuild\n")])])]),s("h2",{attrs:{id:"常见命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见命令"}},[t._v("#")]),t._v(" 常见命令")]),t._v(" "),s("h3",{attrs:{id:"npm-rebuild"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-rebuild"}},[t._v("#")]),t._v(" npm rebuild")]),t._v(" "),s("blockquote",[s("p",[t._v("我司升上了 webpack4，我个人版本的 "),s("code",[t._v("node")]),t._v("，"),s("code",[t._v("npm")]),t._v(" 版本低了，需要升级")])]),t._v(" "),s("p",[t._v("This command runs the npm build command on the matched folders. This is useful when you install a new version of node, and must recompile all your C++ addons with the new binary.")]),t._v(" "),s("h3",{attrs:{id:"npm-upgrade"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-upgrade"}},[t._v("#")]),t._v(" npm upgrade")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("npm update "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("g"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("pkg"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("也可以使用 npm 包来管理它的升级。（npm-check）")]),t._v(" "),s("p",[t._v("npm-check 直接运行这个命令就可以了。然后根据提示进行升级。")]),t._v(" "),s("h2",{attrs:{id:"npm-ls"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-ls"}},[t._v("#")]),t._v(" npm ls")]),t._v(" "),s("p",[t._v("该命令可以展示你所有的依赖，特别好用")]),t._v(" "),s("h2",{attrs:{id:"设置环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置环境变量"}},[t._v("#")]),t._v(" 设置环境变量")]),t._v(" "),s("p",[t._v("process.env(包含用户环境信息的对象)")]),t._v(" "),s("h3",{attrs:{id:"cross-env"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cross-env"}},[t._v("#")]),t._v(" cross-env")]),t._v(" "),s("h4",{attrs:{id:"windows-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#windows-配置"}},[t._v("#")]),t._v(" WINDOWS 配置")]),t._v(" "),s("p",[t._v("set NODE_ENV")]),t._v(" "),s("h4",{attrs:{id:"linux-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux-配置"}},[t._v("#")]),t._v(" LINUX 配置")]),t._v(" "),s("p",[t._v("export NODE_ENV=production")]),t._v(" "),s("h4",{attrs:{id:"跨平台配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#跨平台配置"}},[t._v("#")]),t._v(" 跨平台配置")]),t._v(" "),s("p",[s("code",[t._v("cross-env")]),t._v(" makes it so you can have a single command without worrying about setting or using the environment variable properly for the platform.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Usage")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cross-env NODE_ENV=production webpack --config build/webpack.config.js"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"package-json-bootstrap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#package-json-bootstrap"}},[t._v("#")]),t._v(" package.json bootstrap")]),t._v(" "),s("blockquote",[s("p",[t._v("这个意思非常好")])]),t._v(" "),s("p",[t._v('"bootstrap": "yarn || npm i --registry=https://registry.npm.taobao.org"')]),t._v(" "),s("h2",{attrs:{id:"npm-package"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-package"}},[t._v("#")]),t._v(" npm package")]),t._v(" "),s("h3",{attrs:{id:"npx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npx"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"https://medium.com/@maybekatz/introducing-npx-an-npm-package-runner-55f7d4bd282b",target:"_blank",rel:"noopener noreferrer"}},[t._v("npx"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("一个 npm 包运行工具(npm 版本 5.2 已上)")]),t._v(" "),s("p",[t._v("a tool intended to help round out the experience of using packages from the npm registry")]),t._v(" "),s("ul",[s("li",[t._v("Using locally-installed tools without npm run-script")]),t._v(" "),s("li",[t._v("Executing one-off commands")]),t._v(" "),s("li",[t._v("Run commands with different Node.js versions")])]),t._v(" "),s("h3",{attrs:{id:"npm-version"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-version"}},[t._v("#")]),t._v(" npm-version")]),t._v(" "),s("blockquote",[s("p",[t._v("如果你有 npm 包，不应该手动升级他的版本，而是通过这个命令")])]),t._v(" "),s("p",[s("code",[t._v("npm version [<newversion> | major | minor | patch | premajor | preminor | prepatch | prerelease [--preid=<prerelease-id>] | from-git]")])]),t._v(" "),s("p",[t._v("If run in a git repo, it will also "),s("code",[t._v("create a version commit and tag")]),t._v(". This behavior is controlled by git-tag-version")]),t._v(" "),s("p",[t._v("npm 基本遵守 "),s("a",{attrs:{href:"http://semver.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("semver"),s("OutboundLink")],1),t._v(" 语义化版本号的规则，使用 node-semver 来解析版本号。")]),t._v(" "),s("p",[t._v("一般来说，一个版本号包含三个部分：")]),t._v(" "),s("p",[t._v("MAJOR MINOR PATCH")]),t._v(" "),s("p",[t._v("MAJOR 表示主版本号，通常有重大改变或者达到里程碑才改变\nMINOR 表示次版本号，在保证主体功能基本不变的情况下,如果适当增加了新功能可以更新此版本号\nPATCH 表示修订号：一些小范围的修修补补就可以更新补丁号\n它们的取值为非负整数，若大于零，不能在前方补零")]),t._v(" "),s("h3",{attrs:{id:"安装固定版本的-npm-包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装固定版本的-npm-包"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"https://loveky.github.io/2017/03/27/lock-npm-package-version-in-js-project/",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装固定版本的 npm 包"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("安装时加个参数即可")]),t._v(" "),s("p",[s("code",[t._v("npm i -E packageName")])])]),t._v(" "),s("h3",{attrs:{id:"如何正确的定义依赖的版本号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何正确的定义依赖的版本号"}},[t._v("#")]),t._v(" 如何正确的定义依赖的版本号")]),t._v(" "),s("ul",[s("li",[t._v("^ 表示同一主版本号中，不小于指定版本号的版本号")]),t._v(" "),s("li",[t._v("~ 表示同一主版本号和次版本号中，不小于指定版本号的版本号")]),t._v(" "),s("li",[t._v("|| 表示或")]),t._v(" "),s("li",[s("code",[t._v("> 、<、=、>=、<=、-")]),t._v(" 用来指定一个版本号范围")]),t._v(" "),s("li",[s("code",[t._v("x、X、*")]),t._v(" 表示通配符")])]),t._v(" "),s("h3",{attrs:{id:"如何控制你的-npm-包版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何控制你的-npm-包版本"}},[t._v("#")]),t._v(" 如何控制你的 npm 包版本")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("nvm node 版本控制( 独立的软件包 )")])]),t._v(" "),s("li",[s("p",[t._v("nrm npm 源控制( npm 包)\nnpm 的源控制可以通过 npm config 来设置， 也可以直接写进 .npmrc")])]),t._v(" "),s("li",[s("p",[t._v("npm-check-updates")])])]),t._v(" "),s("p",[t._v("这个包帮你检查包的版本情况，然后需手动升级")]),t._v(" "),s("h3",{attrs:{id:"如何发布自己的-npm-包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何发布自己的-npm-包"}},[t._v("#")]),t._v(" 如何发布自己的 NPM 包")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("你已经是个成熟的前端了，该自己写包了")]),t._v(" "),s("ul",[s("li",[t._v("在"),s("a",{attrs:{href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm 官网"),s("OutboundLink")],1),t._v("注册一个 npm 账号")]),t._v(" "),s("li",[t._v("控制台添加 npm 用户："),s("code",[t._v("npm adduser")])]),t._v(" "),s("li",[t._v("控制台登陆 npm："),s("code",[t._v("npm login")])]),t._v(" "),s("li",[t._v("发布："),s("code",[t._v("npm publish version")])])])]),t._v(" "),s("h2",{attrs:{id:"npm-script"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-script"}},[t._v("#")]),t._v(" npm script")]),t._v(" "),s("blockquote",[s("p",[t._v("参考教程：https://css-tricks.com/why-npm-scripts/")])]),t._v(" "),s("p",[t._v("npm script 更加的灵活，构建工具可能存在的问题：")]),t._v(" "),s("ul",[s("li",[t._v("因为一些构建工具可能不存在对应的插件")]),t._v(" "),s("li",[t._v("插件可能会使用一些旧的版本，不是很匹配当前文档")]),t._v(" "),s("li",[t._v("错误不容易被处理")])]),t._v(" "),s("h2",{attrs:{id:"npm-config"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-config"}},[t._v("#")]),t._v(" npm config")]),t._v(" "),s("p",[t._v("查看 npm 配置，比如有时候看看你的 npm 仓库源是什么，可以使用 npm config list，或者运行"),s("code",[t._v("npm config ls -l")]),t._v("显示所有的配置包含隐式配置。")]),t._v(" "),s("h3",{attrs:{id:"npm-config-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-config-2"}},[t._v("#")]),t._v(" npm-config")]),t._v(" "),s("p",[t._v("Any environment variables that start with "),s("code",[t._v("npm_config_")]),t._v(" will be interpreted as a configuration parameter.")]),t._v(" "),s("p",[s("code",[t._v('local": "npm run webpack-serve --config=test')])]),t._v(" "),s("p",[t._v("可以通过 process.env.NPM_CONFIG_CONFIG 访问到值 test")]),t._v(" "),s("h3",{attrs:{id:"npm-的配置文件-npmrc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-的配置文件-npmrc"}},[t._v("#")]),t._v(" npm 的配置文件 .npmrc")]),t._v(" "),s("p",[t._v("我们工作中经常用到的是就是设置一下 npm 的仓库了,有时候你可以在你的项目里面放置一个.npmrc 文件，设置 npm 源地址。")]),t._v(" "),s("p",[t._v("值得注意的是，npmrc 配置文件的写法是 key=value ，一行一个")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("// 获取\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" get registry\n// 设置\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" registry  https://registry.npm.taobao.org\n// 删除\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" register\n// 直接编辑配置文件\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config edit\n")])])]),s("h2",{attrs:{id:"pm2-进程守护"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pm2-进程守护"}},[t._v("#")]),t._v(" pm2 进程守护")]),t._v(" "),s("p",[t._v("pm2 delete [name] 可以删除掉你不需要在列表上展示的任务。")]),t._v(" "),s("p",[t._v("现在 pm2 可以运行 yarn ？ 虽然我没有试用成功")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://pm2.keymetrics.io/docs/usage/quick-start/",target:"_blank",rel:"noopener noreferrer"}},[t._v("QUICK START"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"pm2-直接运行-npm-script"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pm2-直接运行-npm-script"}},[t._v("#")]),t._v(" pm2 直接运行 npm script")]),t._v(" "),s("p",[t._v("不知道为啥运行 yarn 就不行，"),s("a",{attrs:{href:"https://github.com/Unitech/pm2/issues/3652",target:"_blank",rel:"noopener noreferrer"}},[t._v("相关 issue"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("最后，我通过运行 npm 解决了问题 "),s("a",{attrs:{href:"https://stackoverflow.com/questions/31579509/can-pm2-run-an-npm-start-script",target:"_blank",rel:"noopener noreferrer"}},[t._v("查看"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("pm2 start npm --no-automation --name {app name} -- run {script name}")]),t._v(" "),s("h2",{attrs:{id:"nodemon-执行非-node-脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nodemon-执行非-node-脚本"}},[t._v("#")]),t._v(" nodemon 执行非 node 脚本")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("nodemon "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("exec "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"python -v"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py\n")])])]),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/01/npm-install.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm 模块安装机制简介"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://blog.xcatliu.com/2015/04/14/semantic_versioning_and_npm/",target:"_blank",rel:"noopener noreferrer"}},[t._v("NPM 版本相关问题"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);