(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{368:function(t,a,e){"use strict";e.r(a);var r=e(38),n=Object(r.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"node-包管理器-npm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#node-包管理器-npm","aria-hidden":"true"}},[t._v("#")]),t._v(" Node 包管理器 Npm")]),t._v(" "),e("h2",{attrs:{id:"npm-钩子"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm-钩子","aria-hidden":"true"}},[t._v("#")]),t._v(" npm 钩子")]),t._v(" "),e("ul",[e("li",[t._v("npm 脚本有"),e("code",[t._v("pre")]),t._v("和"),e("code",[t._v("post")]),t._v("两个钩子。执行"),e("code",[t._v("npm run build")]),t._v("的时候，会自动按照下面的顺序执行。")])]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("npm run prebuild "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" npm run build "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" npm run postbuild\n")])])]),e("h2",{attrs:{id:"常见命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常见命令","aria-hidden":"true"}},[t._v("#")]),t._v(" 常见命令")]),t._v(" "),e("h3",{attrs:{id:"npm-rebuild"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm-rebuild","aria-hidden":"true"}},[t._v("#")]),t._v(" npm rebuild")]),t._v(" "),e("blockquote",[e("p",[t._v("我司升上了 webpack4，我个人版本的 "),e("code",[t._v("node")]),t._v("，"),e("code",[t._v("npm")]),t._v(" 版本低了，需要升级")])]),t._v(" "),e("p",[t._v("This command runs the npm build command on the matched folders. This is useful when you install a new version of node, and must recompile all your C++ addons with the new binary.")]),t._v(" "),e("h3",{attrs:{id:"npm-upgrade"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm-upgrade","aria-hidden":"true"}},[t._v("#")]),t._v(" npm upgrade")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("npm update "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("g"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("pkg"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),e("p",[t._v("也可以使用 npm 包来管理它的升级。（npm-check）")]),t._v(" "),e("p",[t._v("npm-check 直接运行这个命令就可以了。然后根据提示进行升级。")]),t._v(" "),e("h3",{attrs:{id:"npm-config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm-config","aria-hidden":"true"}},[t._v("#")]),t._v(" npm-config")]),t._v(" "),e("p",[t._v("Any environment variables that start with "),e("code",[t._v("npm_config_")]),t._v(" will be interpreted as a configuration parameter.")]),t._v(" "),e("p",[e("code",[t._v('local": "npm run webpack-serve --config=test')])]),t._v(" "),e("p",[t._v("可以通过 process.env.NPM_CONFIG_CONFIG 访问到值 test")]),t._v(" "),e("p",[t._v("npm 的配置文件 .npmrc\n我们工作中经常用到的是就是设置一下 npm 的仓库了")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("// 获取\nnpm get registry\n// 设置\nnpm config set registry  https://registry.npm.taobao.org\n// 删除\nnpm config rm register\n// 直接编辑配置文件\nnpm config edit\n")])])]),e("h2",{attrs:{id:"npm-ls"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm-ls","aria-hidden":"true"}},[t._v("#")]),t._v(" npm ls")]),t._v(" "),e("p",[t._v("该命令可以展示你所有的依赖，特别好用")]),t._v(" "),e("h2",{attrs:{id:"设置环境变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置环境变量","aria-hidden":"true"}},[t._v("#")]),t._v(" 设置环境变量")]),t._v(" "),e("p",[t._v("process.env(包含用户环境信息的对象)")]),t._v(" "),e("h3",{attrs:{id:"cross-env"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cross-env","aria-hidden":"true"}},[t._v("#")]),t._v(" cross-env")]),t._v(" "),e("h4",{attrs:{id:"windows-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#windows-配置","aria-hidden":"true"}},[t._v("#")]),t._v(" WINDOWS 配置")]),t._v(" "),e("p",[t._v("set NODE_ENV")]),t._v(" "),e("h4",{attrs:{id:"linux-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux-配置","aria-hidden":"true"}},[t._v("#")]),t._v(" LINUX 配置")]),t._v(" "),e("p",[t._v("export NODE_ENV=production")]),t._v(" "),e("h4",{attrs:{id:"跨平台配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#跨平台配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 跨平台配置")]),t._v(" "),e("p",[e("code",[t._v("cross-env")]),t._v(" makes it so you can have a single command without worrying about setting or using the environment variable properly for the platform.")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Usage")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scripts"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cross-env NODE_ENV=production webpack --config build/webpack.config.js"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"package-json-bootstrap"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#package-json-bootstrap","aria-hidden":"true"}},[t._v("#")]),t._v(" package.json bootstrap")]),t._v(" "),e("blockquote",[e("p",[t._v("这个意思非常好")])]),t._v(" "),e("p",[t._v('"bootstrap": "yarn || npm i --registry=https://registry.npm.taobao.org"')]),t._v(" "),e("h2",{attrs:{id:"npm-package"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm-package","aria-hidden":"true"}},[t._v("#")]),t._v(" npm package")]),t._v(" "),e("h3",{attrs:{id:"npx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npx","aria-hidden":"true"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://medium.com/@maybekatz/introducing-npx-an-npm-package-runner-55f7d4bd282b",target:"_blank",rel:"noopener noreferrer"}},[t._v("npx"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("a tool intended to help round out the experience of using packages from the npm registry")]),t._v(" "),e("ul",[e("li",[t._v("Using locally-installed tools without npm run-script")]),t._v(" "),e("li",[t._v("Executing one-off commands")]),t._v(" "),e("li",[t._v("Run commands with different Node.js versions")])]),t._v(" "),e("h3",{attrs:{id:"npm-version"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm-version","aria-hidden":"true"}},[t._v("#")]),t._v(" npm-version")]),t._v(" "),e("blockquote",[e("p",[t._v("如果你有 npm 包，不应该手动升级他的版本，而是通过这个命令")])]),t._v(" "),e("p",[e("code",[t._v("npm version [<newversion> | major | minor | patch | premajor | preminor | prepatch | prerelease [--preid=<prerelease-id>] | from-git]")])]),t._v(" "),e("p",[t._v("If run in a git repo, it will also "),e("code",[t._v("create a version commit and tag")]),t._v(". This behavior is controlled by git-tag-version")]),t._v(" "),e("p",[t._v("npm 基本遵守 "),e("a",{attrs:{href:"http://semver.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("semver"),e("OutboundLink")],1),t._v(" 语义化版本号的规则，使用 node-semver 来解析版本号。")]),t._v(" "),e("p",[t._v("一般来说，一个版本号包含三个部分：")]),t._v(" "),e("p",[t._v("MAJOR MINOR PATCH")]),t._v(" "),e("p",[t._v("MAJOR 表示主版本号，通常有重大改变或者达到里程碑才改变\nMINOR 表示次版本号，在保证主体功能基本不变的情况下,如果适当增加了新功能可以更新此版本号\nPATCH 表示修订号：一些小范围的修修补补就可以更新补丁号\n它们的取值为非负整数，若大于零，不能在前方补零")]),t._v(" "),e("h3",{attrs:{id:"安装固定版本的-npm-包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装固定版本的-npm-包","aria-hidden":"true"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://loveky.github.io/2017/03/27/lock-npm-package-version-in-js-project/",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装固定版本的 npm 包"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("安装时加个参数即可")]),t._v(" "),e("p",[e("code",[t._v("npm i -E packageName")])])]),t._v(" "),e("h3",{attrs:{id:"如何正确的定义依赖的版本号"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何正确的定义依赖的版本号","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何正确的定义依赖的版本号")]),t._v(" "),e("ul",[e("li",[t._v("^ 表示同一主版本号中，不小于指定版本号的版本号")]),t._v(" "),e("li",[t._v("~ 表示同一主版本号和次版本号中，不小于指定版本号的版本号")]),t._v(" "),e("li",[t._v("|| 表示或")]),t._v(" "),e("li",[e("code",[t._v("> 、<、=、>=、<=、-")]),t._v(" 用来指定一个版本号范围")]),t._v(" "),e("li",[e("code",[t._v("x、X、*")]),t._v(" 表示通配符")])]),t._v(" "),e("h3",{attrs:{id:"如何控制你的-npm-包版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何控制你的-npm-包版本","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何控制你的 npm 包版本")]),t._v(" "),e("ul",[e("li",[t._v("nvm node 版本控制( 独立的软件包 )")]),t._v(" "),e("li",[t._v("nrm npm 源控制( npm 包)\nnpm 的源控制可以通过 npm config 来设置， 也可以直接写进 .npmrc")])]),t._v(" "),e("h3",{attrs:{id:"如何发布自己的-npm-包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何发布自己的-npm-包","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何发布自己的 NPM 包")]),t._v(" "),e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("你已经是个成熟的前端了，该自己写包了")]),t._v(" "),e("ul",[e("li",[t._v("在"),e("a",{attrs:{href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm 官网"),e("OutboundLink")],1),t._v("注册一个 npm 账号")]),t._v(" "),e("li",[t._v("控制台添加 npm 用户："),e("code",[t._v("npm adduser")])]),t._v(" "),e("li",[t._v("控制台登陆 npm："),e("code",[t._v("npm login")])]),t._v(" "),e("li",[t._v("发布："),e("code",[t._v("npm publish version")])])])]),t._v(" "),e("h2",{attrs:{id:"npm-script"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm-script","aria-hidden":"true"}},[t._v("#")]),t._v(" npm script")]),t._v(" "),e("blockquote",[e("p",[t._v("参考教程：https://css-tricks.com/why-npm-scripts/")])]),t._v(" "),e("p",[t._v("npm script 更加的灵活，构建工具可能存在的问题：")]),t._v(" "),e("ul",[e("li",[t._v("因为一些构建工具可能不存在对应的插件")]),t._v(" "),e("li",[t._v("插件可能会使用一些旧的版本，不是很匹配当前文档")]),t._v(" "),e("li",[t._v("错误不容易被处理")])]),t._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/01/npm-install.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm 模块安装机制简介"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://blog.xcatliu.com/2015/04/14/semantic_versioning_and_npm/",target:"_blank",rel:"noopener noreferrer"}},[t._v("NPM 版本相关问题"),e("OutboundLink")],1)])])])},[],!1,null,null,null);a.default=n.exports}}]);