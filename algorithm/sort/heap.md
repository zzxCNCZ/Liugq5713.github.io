# 堆排序

堆排序可以认为是选择排序的改进版，像选择排序一样将输入划分为已排序和待排序。

1. 将无序序列构建成一个堆，根据升序降序需求选择大顶堆或小顶堆;
2. 将堆顶元素与末尾元素交换，将最大元素"沉"到数组末端;
3. 重新调整结构，使其满足堆定义，然后继续交换堆顶元素与当前末尾元素，反复执行调整+交换步骤，直到整个序列有序。

## 堆

::: tip 堆
堆是一个近似完全二叉树的结构，并同时满足堆积的性质：即子节点的键值或索引总是小于（或者大于）它的父节点。
:::

### 堆节点的访问

通常堆是通过一维数组来实现的。在数组起始位置为 0 的情形中：

- 父节点 i 的左子节点在位置(2i+1);
- 父节点 i 的右子节点在位置(2i+2);
- 子节点 i 的父节点在位置 floor((i-1)/2);

### 堆的操作

在堆的数据结构中，堆中的最大值总是位于根节点（在优先队列中使用堆的话堆中的最小值位于根节点）。堆中定义以下几种操作：

- 最大堆调整（Max Heapify）：将堆的末端子节点作调整，使得子节点永远小于父节点
- 创建最大堆（Build Max Heap）：将堆中的所有数据重新排序
- 堆排序（HeapSort）：移除位在第一个数据的根节点，并做最大堆调整的递归运算

<<< @/algorithm/sort/code/heap.js

## 参考

- [图解排序算法(三)之堆排序](https://www.cnblogs.com/chengxiao/p/6129630.html)
